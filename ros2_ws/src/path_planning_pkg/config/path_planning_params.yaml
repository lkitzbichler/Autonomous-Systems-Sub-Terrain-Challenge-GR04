path_planner:
  ros__parameters:
    use_sim_time: false

    # Topics
    command_topic: "statemachine/cmd"
    heartbeat_topic: "heartbeat"
    odom_topic: "current_state_est"
    octomap_topic: "octomap_binary"
    trajectory_topic: "trajectory"
    lantern_topic: "detected_lanterns"
    depth_image_topic: "/realsense/depth/image"
    depth_camera_info_topic: "/realsense/depth/camera_info"
    marker_topic: "path_planner/viz/markers"
    selected_path_topic: "path_planner/selected_path"
    viz_frame_id: "world"

    # Timers
    planner_period_sec: 1.0
    heartbeat_period_sec: 1.0
    parameter_refresh_period_sec: 10.0

    # Core flight tuning (runtime-updatable)
    max_v: 1.7
    max_a: 0.75
    waypoint_dist_min: 4.5
    waypoint_dist_max: 10.0
    wall_clearance_min: 5.0
    path_check_step_m: 0.15
    clearance_probe_radius_m: 5.5

    # Replan behavior
    goal_reached_radius_m: 0.9
    replan_timeout_sec: 5.0
    max_frontier_fail_cycles: 6
    required_lantern_count: 5

    # OMPL tuning
    ompl_timeout_sec: 0.45
    ompl_range_m: 3.8
    bounds_padding_m: 1.0

    # Frontier tuning
    frontier_goal_dist_min: 6.0
    frontier_goal_dist_max: 24.0
    frontier_unknown_min_neighbors: 3
    frontier_known_free_min_neighbors: 8
    score_unknown_weight: 1.1
    score_clearance_weight: 2.0
    score_distance_weight: 0.35
    score_revisit_weight: 1.2
    score_forward_weight: 1.6
    forward_min_dot: -0.30

    # Slice-centerline tuning (connected cross-sections)
    centerline_horizon_points: 8
    centerline_step_m: 2.2
    centerline_slice_half_extent_m: 5.0
    centerline_slice_step_m: 0.6
    centerline_min_component_cells: 6
    centerline_max_secondary_goals: 4
    centerline_execute_dist_m: 18.0
    centerline_min_commit_dist_m: 12.0

    # Depth-image heading hint
    depth_free_min_m: 1.5
    depth_max_m: 28.0
    depth_min_component_pixels: 120
    depth_hint_weight: 0.12
    depth_hint_timeout_sec: 0.8
    depth_hint_min_align_dot: 0.55
    depth_body_yaw_correction_deg: 180.0
    depth_far_percentile: 0.72
    depth_target_range_min_m: 2.8
    map_escape_lookahead_m: 4.5
    forward_smoothing_alpha: 0.88
    escape_blend_weight: 0.22

    # Misc
    lantern_merge_dist_m: 1.5
    heading_hint_min_speed: 0.25
    adaptive_waypoint_step_enabled: true
    adaptive_step_clearance_range_m: 2.5
    adaptive_step_turn_weight: 0.35
    adaptive_step_min_ratio: 0.65
    marker_max_candidates: 120
